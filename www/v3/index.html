<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Kharbga</title>
    <meta name="viewport" content="initial-scale=1, user-scalable=no, width=device-width">
    <link rel="stylesheet" href="../css/kharbga.css" />
    <link rel="stylesheet" href="../lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">

    <link rel="shortcut icon" href="../img/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="../css/site.css">
    <link rel="stylesheet" href="index.css">
</head>

<body>


    <!-- /header -->

    <section data-role="page" id="first" data-theme="a">
        <header data-role="header" data-position="fixed">
            <h1><img src="../img/kharbga.png" style="max-height:25px"></h1>
            <a href="#menu-panel" data-icon="info" data-iconpos="notext" class="ui-btn-right">Info</a>
            <a href="#play-watch-section" data-icon="bars" class="ui-btn-left ui-shadow ui-corner-all ui-btn-inline ui-mini" data-iconpos="notext">Play/Watch</a>
        </header>
        <div id="welcome" data-role="panel" class="panel-collapse collapse" data-position="right" data-display="overlay" data-theme="a">
            <div class="row">
                <div class="col-sm-6 col-md-6 text-center">
                    <h1>Welcome to</h1> <img src="../img/kharbga.png" title="Kharbga">
                    <p>If this is your first time here, please click <a href="#rules" data-toggle="modal" data-target="#rulesModal">here
                            to learn about the game.</a></p>
                    <p>This system provides a platform for learning and playing this fun board game from North Africa.
                    </p>
                </div>
                <div class="col-sm-6 col-md-6 text-center">
                    <figure>
                        <img src="../img/players.png" style="width:300px;" class="img " title="Kharbga game played in the desert of North Africa">
                        <figcaption>
                            <strong>Kharbga Game Played on a Sand Board in the desert of North Africa</strong>
                        </figcaption>
                    </figure>
                </div>
            </div>
        </div>
        <article role="main" class="ui-content">
            <div id="menu-panel" data-role="panel" data-position="right" data-display="overlay" data-theme="a">
                <img src="../img/kharbga.png" style="max-height:40px" title="Kharbga Game Network" />
                <h3>Welcome</h3>
                <p>If this is your first time here, please click <a href="../html/rules.html">here
                        to learn about the game.</a></p>
                <p>
                    This system provides a platform for learning and playing this fun board game from North Africa.
                </p>
                <h4>Choose from the options below to learn more about this system.</h4>
                <ul data-role="listview" data-inset="true">

                    <li><a target="rules" href="../html/rules.html">Game Rules</a></li>
                    <li><a target="rules" href="../html/terms.html">Terms & Conditions</a></li>
                    <li><a target="rules" href="../html/privacy.html">Privacy</a></li>
                    <li><a target="nouris" href="http://www.nourisolutions.com/company/message/send/1">Contact Us</a></li>

                </ul>
                <p>
                    If you are a developer interested in contributing, please <a href="http://www.nourisolutions.com/company/message/send/1">contact us</a> for additional info and let us know how you could help.
                </p>
                <p>
                    <a href="#play-watch-section" class="ui-btn ui-btn-left ui-shadow ui-corner-all ui-btn-inline">Join / Watch Active Games</a>
                </p>
                <hr>
                <p class="text-center"> <a href="#" data-rel="close">Close</a></p>
                <hr>
                <figure>
                    <img src="../img/players.png" style="width:300px;" class="img" title="Kharbga game played in the desert of North Africa">
                    <figcaption>
                        <strong>Kharbga Game Played on a Sand Board in North Africa</strong>
                    </figcaption>
                </figure>

            </div>
            <div data-role="panel" id="play-watch-section" class="panel-body" data-position="left" data-display="overlay" data-theme="a">
                <div class="btn-group">
                    <h3>Join or Watch Active Games</h3>
                    <a href="#" data-rel="close">Close</a>

                    <ul data-role="listview" data-inset="true" class="dropdown-menu" role="menu">

                    </ul>
                </div>
                <ul id="games-list" data-role="listview" data-inset="true" data-theme="b" style="xmax-height: 200px;xoverflow-y:scroll" class="list-group ">
                </ul>
            </div>


            <div class="row">
                <div class="col-sm-6 col-md-5 col-lg-4">
                    <div class="panel panel-success">
                        <div class="panel-header">
                            <p>
                                <a href="#" class="pull-right" id="flipOrientation" value="Flip orientation">Flip</a>
                                <strong>Turn:</strong> <span id="player-turn" class="badge"></span> <strong>
                                    
                            </p>
                        </div>
                        <div class="panel-body text-center">
                            <!-- The Board -->
                            <div id="board" style="min-width:250px;max-width:300px"></div>
                            <div id="message" class=""></div>
                        </div>
                        <div class="panel-footer">
<!--
                        <label>
                            <input type="checkbox" id="abandonCheckbox" class="ui-btn-inline">
                            <strong>Resign</strong>
                                </label>
                                -->
                                <p>
                                    Board State:</strong>
                                    <span id="state" class="badge"></span>
                                </p>
                                <audio id="sound" preload="auto">
                                <source src="../img/button-26.mp3" type="audio/mpeg">
                             </audio>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6">
                    <a href="#popup-menu" class="btn btn-default" data-rel="popup" data-transition="slideup" data-icon="gear" class="ui-btn ui-icon-gear ui-btn-inline ">New Game</a>
                    <div id="popup-menu" data-role="popup">
                        <ul data-role="listview" data-inset="true">
                            <li><a id="new-game-attacker" href="#play-attacker">As Attacker</a></li>
                            <li><a id="new-game-defender" href="#play-defender">As Defender</a></li>
                            <li><a id="new-game-attacker-system" href="#play-attacker-system">As Attacker against
                                        system</a></li>
                            <li><a id="new-game-defender-system" href="#play-defender-system">As Defender against
                                        system</a></li>
                        </ul>

                    </div>
                    <div class="panel panel-success">
                        <div class="panel-heading">
                            Game ID: <span id="current-game-id"></span>
                        </div>
                        <div class="panel-body">
                            <p>
                                <label class="text-info" for="current-game-status">Game State: </label>
                                <span id="current-game-status" class="badge"></span></p>
                            <p>
                                <label class="text-info" for="gameMove">Last Action: </label>
                                <span id="gameMove" class="badge"></span>
                            </p>
                            <p class="text-success">info: <span id="fen" class=""></span></p>

                            <hr>
                            <div id="game-moves-history" class="height:120px;overflow-y:scroll">
                            </div>
                        </div>
                    </div>
                    <div id="tab-messages" class="panel panel-success">
                        <div class="panel-heading">
                            Player Messages
                        </div>
                        <div class="panel-body">
                            <label for="move-message">Message:</label>
                            <input type="text" xclass="form-control" id="move-message" name="move-message">
                            <button id="postMessageBtn" type="submit" class="btn btn-default ui-btn ui-btn-inline">Post</button>

                            <h5>Net Messages - URI: <span id="server-uri"></span> -
                                <a href="#" data-icon="refresh" id="server-link" value="connect-server">
                                    Reconnect
                                </a> |
                                <a href="#" id="ping-link" value="ping">Ping Server</a>
                            </h5>
                            <div style="height: 200px;overflow-y:scroll">
                                <ul id="messages-list" class="list-group "></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <h4>Development & Operation Support</h4>
            <div data-role="tabs" id="game-tabs">
                <div data-role="navbar">
                    <ul>
                        <li>
                            <a href="#tab-server" data-ajax="false">Server Status</a>
                        </li>
                        <li>
                            <a href="#tab-game-state" data-ajax="false">Game State</a>
                        </li>
                        <li>
                            <a href="#tab-app-state" data-ajax="false">Client App State</a>
                        </li>
                    </ul>
                </div>

                <div id="tab-server">

                    <h4>API URL: <span id="api-url"></span>
                        <a href="#" id="refreshAppInfo-submit" data-icon="refresh" value="Refresh" class="">
                             Refresh
                    </a></h4>
                    <div id="help-message"> </div>
                    <table id="app-info-table" class="table table-striped">
                        <tbody id="app-info-table-body">

                        </tbody>
                    </table>
                </div>
                <div id="tab-game-state">
                    <h4>Active Game State
                        <a href="#" id="game-state-link" value="Refresh">
                             Refresh
                        </a>
                    </h4>

                    <div class="panel-body">
                        <div id="game-state-message"> </div>
                        <table id="game-state-table" class="table table-striped">
                            <tbody id="game-state-table-body">

                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="tab-app-state">
                    <h4>App Client State -
                        <a href="#" id="app-state-link" value="Refresh">
                            Refresh
                        </a>
                    </h4>
                    <div class="panel-body">
                        <div id="app-state-message"> </div>
                        <table id="app-state-table" class="table table-striped">
                            <tbody id="app-state-table-body">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            </div>
            <!-- <a href="#second" data-role="button" data-inline="true" data-transition="flow" data-icon="carat-r" data-iconpos="right">Go to Page 2</a>
           -->
        </article>
        <footer data-role="footer" data-position="fixed">
            <h4>Developed & Operated By <a target="nouris" href="http://www.nouriSolutions.com">Nouri&nbsp;Solutions,&nbsp;LLC</a></h4>
        </footer>
        </footer>
    </section>

    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"></script>


    <script src="../jsconfig/env.js"></script>
    <script src="../lib/jquery/jquery.min.js"></script>
    <script src="../js/jquery.signalR-2.3.0.js"></script>
    <script src="../js/jquery.validate.js"></script>
    <script src="../js/additional-methods.js"></script>
    <script>
        var scriptToLoad = window.__env.baseURI + "signalR/hubs";
        console.log("loading: " + scriptToLoad);
        var signalRElement = document.createElement('script');
        signalRElement.setAttribute('src', scriptToLoad);
        document.body.appendChild(signalRElement)
        console.log("loading: " + scriptToLoad);
    </script>

    <script src="../js/moment.min.js"></script>
    <script src="../js/kharbga-ui.js"></script>
    <script src="../js/kharbga.js"></script>
    <script src="../js/ns-api-client.js"></script>
    <script src="../js/ns-app.kharbga.js"></script>
    <script src="index.js"></script>
    <script type="text/javascript">
        //<![CDATA[
        $(document).ready(function() {
            //  $('.combobox').combobox()
            var kApp = new KharbgaApp();
            var setupOk = kApp.initMessaging();
            if (setupOk == false) {
                // alert("Unable to setup connection to the server. Please try again later!");
                // try again after a couple of sec
                setTimeout(function() {
                    kApp.initMessaging();
                }, 2000);
            }

            kApp.initBoard({
                themePath: '../img/theme-simple/{piece}.png'
            });
        });



        //]]>
    </script>
</body>

</html>