<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kharbga.Net</title>
    <link rel="shortcut icon" href="../img/favicon.ico" type="image/x-icon">
    <!-- Compressed CSS -->
    <link rel="stylesheet" href="../lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/kharbga.css" />
    <link rel="stylesheet" href="../css/site.css">
</head>

<body>
    <div class="container-fluid">
        <img src='../img/kharbga.png' title="Kharbga" />
        <h1>System Information</h1>
        <div id="main-message" class=""></div>


        <div id="system" class="">
            <div id="system-message"></div>
            <div class="row">
                <div class="col-sm-12 col-md-6">
                    <!--Connections-->
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <strong> Active Connections: </strong><span id="connections-count"></span> record(s)
                            <div class="pull-right">
                                <a href="#" id="connections-link" value="refresh-connections">
                                    <span class="glyphicon glyphicon-refresh"></span>Refresh
                                </a>
                            </div>

                        </div>
                        <div class="panel-body">
                            <div id="connections-table" style="height: 300px; overflow-y:scroll">

                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-md-6">
                    <!--Players-->
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <strong>Players: </strong> <span id="players-count"></span> record(s)
                            <div class="pull-right">
                                <a href="#" id="players-link" value="refresh-players">
                                    <span class="glyphicon glyphicon-refresh"></span>Refresh
                                </a>
                            </div>

                        </div>
                        <div class="panel-body">
                            <div id="players-table" style="height: 300px; overflow-y:scroll">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--Games-->
            <div class="panel panel-info">
                <div class="panel-heading">
                    <strong>Games: </strong> <span id="games-count"></span> record(s)
                    <div class="pull-right">
                        <a href="#" id="system-games-link" value="refresh-games">
                            <span class="glyphicon glyphicon-refresh"></span>Refresh
                        </a>
                    </div>
                </div>
                <div class="panel-body">
                    <div id="games-table" style="height: 300px; overflow-y:scroll">

                    </div>
                </div>
            </div>

        </div>
        <div id="help">
            <div id="help-message"></div>
            <!-- Trigger the modal with a button -->
            <button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#rulesModal">View
                    Rules</button>

            <div class="panel panel-info">
                <div class="panel-heading"><strong>API URL:</strong> <span id="api-url"></span>
                    <div class="pull-right">
                        <a href="#" id="refreshAppInfo-submit" value="Refresh">
                            <span class="glyphicon glyphicon-refresh"></span> Refresh
                        </a>
                    </div>
                </div>
                <div class="panel-body">
                    <div id="help-message"> </div>
                    <table id="app-info-table" class="table table-striped">
                        <tbody id="app-info-table-body">

                        </tbody>
                    </table>
                </div>
            </div>
            <!-- Signal R messages-->
            <div class="panel panel-info">
                <div class="panel-heading">
                    <strong>Messaging Server Status</strong>

                    <div class="pull-right">
                        <a href="#" id="ping-link" value="ping">
                            <span class="glyphicon glyphicon-ping"></span>Ping Server
                        </a>
                    </div>

                </div>
                <div class="panel-body">
                    <div id="signalr-status" class=""></div>
                    <div style="height: 400px;overflow-y:scroll">
                        <ul id="messages-list" class="list-group "></ul>
                    </div>
                </div>
            </div>
            <div class="panel panel-info">
                <div class="panel-heading">
                    Settings
                </div>
                <div class="panel-body">
                    <p>
                        <input id="use-server-checkbox" type="checkbox" /> Use Server
                        <input id="play-on-same-computer" type="checkbox" />Both players play on this board
                    </p>
                </div>
            </div>

            <div class="panel panel-info">
                <div class="panel-heading"><strong>App Client State</strong>
                    <div class="pull-right">
                        <a href="#" id="app-state-link" value="Refresh">
                            <span class="glyphicon glyphicon-refresh"></span> Refresh
                        </a>
                    </div>

                </div>
                <div class="panel-body">
                    <div id="app-state-message"> </div>
                    <table id="app-state-table" class="table table-striped">
                        <tbody id="app-state-table-body">

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    </div>
    <!-- Modal Dialogs-->

    <footer>
        <hr />
        <div class="container row">
            <div class="col-sm-9">

            </div>
            <div class="col-sm-3">
                <strong>Developed by <a href="http://www.nouriSolutions.com">Nouri&nbsp;Solutions,&nbsp;LLC</a></strong>
            </div>
        </div>
    </footer>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"></script>
    <script src="../lib/jquery/jquery.min.js"></script>
    <script src="../lib/bootstrap/js/bootstrap.min.js"></script>

    <script src="../js/jquery.validate.js"></script>
    <script src="../js/additional-methods.js"></script>

    <script src="../jsconfig/env.js"></script>
    <script src="../js/jquery.signalR-2.3.0.js"></script>

    <script>
        var scriptToLoad = window.__env.baseURI + "signalR/hubs";
        console.log("loading: " + scriptToLoad);
        var signalRElement = document.createElement('script');
        signalRElement.setAttribute('src', scriptToLoad);
        document.body.appendChild(signalRElement)
        console.log("loading: " + scriptToLoad);
    </script>


    <!-- convert to the real URL-->
    <script src="../js/moment.min.js"></script>

    <script src="../js/kharbga-ui.js"></script>
    <script src="../js/kharbga.js"></script>
    <script src="../js/ns-app-utils.js"></script>
    <script src="../js/ns-api-client.js"></script>
    <script src="../js/ns-app-user.js"></script>

    <script src="../js/ns-app-kharbga.js"></script>
    <script src="../js/system.js"></script>

    <script type="text/javascript">
        //<![CDATA[
        $(document).ready(function() {
            //  $('.combobox').combobox()
            var kApp = new KharbgaApp();
            // kApp.initBoard({
            //     themePath: '../img/theme-simple/{piece}.png'
            // });
            // Change hash for page-reload
            $('.nav-tabs a').on('shown.bs.tab', function(e) {
                window.location.hash = e.target.hash;
            })
            var url = document.location.toString();
            if (url.match('#')) {
                var activeTab = url.substring(url.indexOf("#") + 1);
                // $('.nav-tabs a[href=#' + activeTab + ']').tab('show');
            }
        });

        //]]>
        function viewGame(id) {
            document.location = "../html/play.html?id=" + id
        }
    </script>
</body>

</html>