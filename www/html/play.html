<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Kharbga.Net - Play and watch Kharbga on local device or with network players</title>
    <meta name="viewport" content="initial-scale=1, user-scalable=no, width=device-width">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
    <link rel="shortcut icon" href="../img/favicon.ico">

    <link rel="stylesheet" href="../css/kharbga.css" />
    <!--
    <link rel="stylesheet" href="../lib/jquery.mobile/jquery.mobile-1.4.5.css">
  -->
    <link rel="stylesheet" href="../css/themes/Kharbga2.css">
    <link rel="stylesheet" href="../css/jqm-helpers.css">
    <link rel="stylesheet" href="../css/themes/jquery.mobile.icons.min.css">

    <link rel="stylesheet" href="../lib/jquery.mobile/jquery.mobile.structure-1.4.5.css">

    <link rel="stylesheet" href="../css/site.css">
    <link rel="stylesheet" href="./play.css">
    <script src="../js/jquery.js"></script>
    <script src="../js/jqm-helpers.js"></script>
    <!--   <script src="../lib/jquery/jquery-1.11.3.min.js"></script>
 -->
    <script src="../lib/jquery.mobile/jquery.mobile-1.4.5.min.js"></script>
    <!-- sent to me m@ns.com -->
    <script src="https://use.fontawesome.com/90b4f6f42d.js"></script>
    <!--
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-6996887-11', 'auto');
        ga('send', 'pageview');
    </script>-->
</head>

<body>
    <div data-role="page" id="first" data-theme="a" class="ns-kharbga">
        <div data-role="header" data-position="fixed" class="text-center jqm-header">
            <a id="" target="rules" href="../html/rules.html" class="ui-mini ns-hide-when-small" data-theme="c">
                <img id="" src="../img/kharbga.png" style="max-height:25px;padding-top:0px;">
            </a>
            <a href="#popup-menu" data-icon="grid" data-mini="true" data-rel="popup" data-transition="slideup" class="ui-btn-left" data-iconpos="notext">Play / Watch
            </a>
            <a id="xlogin-popup" href="#login-popup" data-rel="popup" data-mini="true" data-position-to="window" data-icon="user" class="ui-btn-right" data-iconpos="notext">
                <span class="glyphicon glyphicon-log-in"></span>Login
            </a>

            <a id="account-link" href="#account-panel" data-icon="user" class="ui-btn-right">
                <span id="account-welcome">Welcome</span>
            </a>

        </div>
        <div role="main" class="ui-content jqm-content">
            <div id="popup-menu" data-role="popup">
                <div class="panel-heading ui-bar ui-bar-b" data-theme="b">
                    Main Menu
                </div>
                <ul data-role="listview" data-inset="false">
                    <li>
                        <strong>New Game Options</strong>
                        <ul data-role="listview" data-inset="true">
                            <li>
                                <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">

                                    <label for="play-as-attacker">Play as Attacker</label>
                                    <input type="radio" name="radioPlayRole" id="play-as-attacker" checked/>
                                    <label for="play-as-defender">as Defender</label>
                                    <input type="radio" name="radioPlayRole" id="play-as-defender" />
                                </fieldset>
                            </li>
                            <li>
                                <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
                                    <label for="player-two-person">with real player</label>
                                    <input type="radio" name="radioWithPersonOrComputer" id="player-two-person" />
                                    <label for="player-two-computer">or against computer</label>
                                    <input type="radio" name="radioWithPersonOrComputer" id="player-two-computer" checked/>
                                </fieldset>
                            </li>
                            <li>
                                <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
                                    <label for="over-the-network-game">over the network</label>
                                    <input type="radio" name="radioOneOrTwoPlayers" id="over-the-network-game" />
                                    <label for="local-game">on this device</label>
                                    <input type="radio" name="radioOneOrTwoPlayers" id="local-game" checked/>
                                </fieldset>
                            </li>
                        </ul>
                        <button id="start-game-with-options">Start New Game</button>
                    </li>
                    <li><strong>Play with other network players - must be logged in</strong>
                        <ul data-role="listview" data-inset="false">
                            <li><a id="new-game-attacker" href="#play-attacker">As Attacker</a></li>
                            <li><a id="new-game-defender" href="#play-defender">As Defender</a></li>
                            <!--      <li><a id="new-game-attacker-system" href="#play-attacker-system">As Attacker against
                                            system</a></li>
                            <li><a id="new-game-defender-system" href="#play-defender-system">As Defender against
                                            system</a></li>-->
                        </ul>
                    </li>
                    <li>
                        <!--   <a target="rules" href="../html/rules.html">Game Rules</a> -->
                        <a href="../html/rules.html" data-prefetch="true" data-rel="dialog">Game Rules</a>
                    </li>
                    <li>
                        <a target="rules" href="../html/my-account.html">My Account</a>
                    </li>
                    <li><a target="rules" href="../html/terms.html">Terms & Conditions</a></li>
                    <!--  <li><a target="rules" href="../html/privacy.html">Privacy</a></li>-->
                    <li>
                        <a href="../html/privacy.html" data-prefetch="true" data-rel="dialog">Privacy</a>
                    </li>
                    <li><a target="nouris" href="https://www.onlineobjects.app/message/send/1">Contact Us</a></li>

                </ul>

            </div>
            <div id="account-panel" data-role="panel" data-position="right" data-display="overlay" data-theme="a">

                <a href="#" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
                <img src="../img/kharbga.png" style="max-height:40px" title="Kharbga Game Network" />
                <!--   <a href="#play-watch-section" class="ui-btn ui-shadow ui-corner-all ui-btn-inline">Join / Watch Active Games</a>
              -->
                <div class="panel panel-info">
                    <div class="panel-heading ui-bar ui-bar-c">
                        <a target="rules" href="../html/my-account.html" class="ui-btn ui-btn-b " style="vertical-align:middle">

                            <span style="vertical-align:-webkit-baseline-middle">My Account</span>
                        </a>

                    </div>
                    <div class="panel-body ui-body center">
                        <span id="account-img" class="text-success"></span>
                        <div id="account-message"></div>
                        <div id="logout-li" class="center">
                            <a id="logout-link" href="#logout" data-icon="user" class="ui-btn ui-mini">
                                <span class="fa fa-log-out"></span>Sign Out
                            </a>
                        </div>
                        <hr>
                        <p>If this is your first time here, please click <a target="rules" href="../html/rules.html">here
                                to learn about the game.</a></p>

                        <figure class="center">
                            <a href="#popup-menu" data-rel="popup">
                                <img src="../img/players.png" style="width:90%;" class="img" title="Kharbga game played in the desert of North Africa">
                            </a>
                            <figcaption>
                                <strong>Kharbga Game Played on a Sand Board in North Africa</strong>
                            </figcaption>
                        </figure>
                        <p>
                            Click here to <a href="#popup-menu" data-rel="popup">start a new game as Attacker or Defender</a> playing with the system or other players.</a>
                        </p>
                    </div>
                    <div class="ui-bar ui-bar-c">Choose from the options below to learn more about this system.</div>
                    <ul data-role="listview" data-inset="false">
                        <li><a target="rules" href="../html/rules.html">Game Rules</a></li>
                        <li><a target="rules" href="../html/terms.html">Terms & Conditions</a></li>
                        <li><a target="rules" href="../html/privacy.html">Privacy</a></li>
                        <li><a target="nouris" href="http://www.nourisolutions.com/company/message/send/1">Contact Us</a></li>
                    </ul>
                </div>
                <div class="ui-body">

                    <a href="#play-watch-section" class="ui-btn ui-shadow ui-corner-all ui-btn-inline">Join / Watch Active Games</a>

                    <p class="center">
                        <hr>
                        <a href="#" class="center" data-rel="close">Close</a></p>
                    <hr>
                    </p>
                </div>
            </div>
            <div id="play-watch-section" data-role="popup" x-data-position="right" x-data-display="overlay" data-theme="a" class="ui-content">
                <a href="#" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
                <img src="../img/kharbga.png" style="max-height:40px" title="Kharbga Game Network" />



                <div class="center ui-bar ui-bar-b">
                    <a href="#" data-rel="close">Close</a>
                </div>

            </div>
            <div class="ui-grid-b kharbga-grid">
                <div id="board-frame" class=" ui-block-a">
                    <div class="ui-bar ui-bar-b small" style="font-size:small">
                        <a href="#popup-menu" data-rel="popup" data-transition="slideup" class="ui-mini ui-btn ui-icon-plus ui-btn-inline ui-btn-icon-left xui-btn-icon-notext " title="New Game">Board</a>
                        <a id="clear-board-button" href="#" class="ui-btn ui-shadow ui-corner-all ui-mini ui-btn-inline ui-icon-delete ui-btn-icon-left ui-btn-icon-notext  " title="Clear">Clear</a>

                        <a id="flipOrientation" href="#" class="ui-btn ui-mini ui-btn-inline ui-corner-all ui-shadow  ui-icon-recycle  ui-btn-icon-left ui-btn-icon-notext" title="Flip">Flip</a>

                    </div>
                    <div class="message" id="message" class="small" style="font-size:x-small"></div>
                    <div class="panel-body ">
                        <!-- The Board -->
                        <div id="board"></div>
                    </div>
                    <div class="">
                        <label for="resign-checkbox" style="font-size:x-small"> To resign, check this box and move a solider
                            <input id="resign-checkbox" type="checkbox" name="resign-checkbox" data-mini="true" class="">
                        </label>
                    </div>
                    <div class="panel-footer ui-bar ui-bar-a small">
                        <p class="text-center" style="font-size:x-small">Kharbga Board State:
                            <span id="state" class="badge"></span> <span id="player-turn" class="badge"></span></p>
                    </div>
                    <div class="row fieldset ui-grid-a">
                        <div class="col-sm-2 col-xs-2 ui-block-a" style="width:20%">

                            <audio id="sound" preload="auto">
                                <source src="../img/button-26.mp3" type="audio/mpeg">
                            </audio>
                        </div>

                        <!--  <div class="col-sm-3 col-xs-3" >
                            <a href='' data-ng-click="soundUp()" id="sound-up"><span class="glyphicon glyphicon-volume-up"></span></a>
                            <a href='' data-ng-click="soundDown()" id="sound-down"><span class="glyphicon glyphicon-volume-down"></span></a>
                            </div>-->

                    </div>

                    <hr/>

                </div>
                <div class="ui-block-b" xstyle="padding-top:70px;">
                    <div class="ui-bar ui-bar-b">
                        <h1> Current Game Information</h1>
                        <a id="start-new-game-btn" href="#popup-menu" data-mini="true" data-rel="popup" class="ui-mini ui-btn ui-shadow ui-corner-all ui-btn-inline">New Game</a>
                    </div>
                    <div id="game-message" class=""></div>
                    <div id="current-game-info" class="panel panel-success">
                        <div class="ui-bar ui-bar-b">
                            <small>ID: <span id="current-game-id" style="font-size:xx-small"></span></small>
                        </div>
                        <div class="panel-body">

                            <table class="table table-striped ">
                                <thead>
                                    <tr>
                                        <th style="width:30%">
                                            <a href='#' id="sound-toggle" title="mute/unmute sound">
                                                <div id="sound-mute" class="unmute mute"></div>
                                            </a>
                                        </th>
                                        <th style="width:35%" class="center">Attacker</th>
                                        <th style="width:35%" class="center">Defender</th>
                                    </tr>
                                </thead>
                                <tr>
                                    <th class="text-right">Name: </th>
                                    <td class="center"><span class="attacker-name"></span> </td>
                                    <td class="center"><span class="defender-name"></span> </td>
                                </tr>
                                <tr>
                                    <th class="text-right">Score: </th>
                                    <td class="center"><span class="attacker-score"></span> </td>
                                    <td class="center"><span class="defender-score"> </span> </td>
                                </tr>
                                <!--  
                                <tr>
                                    <th class="text-right">Settings: </th>
                                    <td> <select id="attackerSettings" data-mini="true"> </select></td>
                                    <td><select id="defenderSettings" data-mini="true"> </select></td>
                                </tr>
                                <tr>
                                    <th class="text-right">Moves: </th>
                                    <td><select id="attackerMoves" data-mini="true"> </select> </td>
                                    <td><select id="defenderMoves" data-mini="true"> </select></td>
                                </tr>
                            -->
                            </table>
                            <p>
                                <label class="text-info" for="current-game-status">Game Status: 
                                    <span id="current-game-status" class="badge"></span>
                                </label>
                            </p>
                            <p>
                                <label class="text-info" for="gameMove">Last Action: 
                                    <span id="gameMove" class="badge"></span> 
                                </label>
                            </p>
                            <p style="font-size:xx-small">
                                <label class="text-info" for="fen">FEN: 
                                    <span id="fen" class="small" style="font-size:xx-small"></span>
                                </label>
                            </p>
                            <hr>
                            <div id="computer-message" class=""></div>

                            <div data-role="collapsibleset" data-theme="a" data-content-theme="a" data-inset="true">
                                <div data-role="collapsible" data-collapsed="false">
                                    <h3>Game Moves</h3>
                                    <div id="game-moves-history">
                                        <div class="ui-bar ui-bar-c">
                                            <strong>History</strong>

                                            <p class="text-center">
                                                <a href='#' title="Go to beginning" id="play-beginning"><span class="glyphicon glyphicon-step-backward"></span></a>
                                                <a href='#' title="Play back" id="play-backward"><span class="glyphicon glyphicon-backward"></span></a>
                                                <a href='#' title="Start" id="play-start"><span class="glyphicon glyphicon-play"></span></a>
                                                <a href='#' title="Pause" id="play-pause"><span class="glyphicon glyphicon-pause"></span></a>
                                                <a href='#' title="Play forward" id="play-forward"><span class="glyphicon glyphicon-forward"></span></a>
                                                <a href='#' title="Go to the end" id="play-end"><span class="glyphicon glyphicon-step-forward"></span></a>

                                            </p>

                                        </div>
                                        <div class="ui-body">
                                            <hr>
                                            <ul data-role='listview' id='game-moves-history-list' style='height:250px;max-height:350px; overflow-y:scroll'>
                                            </ul>
                                        </div>

                                    </div>


                                </div>
                                <div data-role="collapsible">
                                    <h3><a id="game-players-link" href="#"> Game Players/Watchers </a></h3>

                                    <ul id="game-players-list" data-role="listview" data-theme="b" data-inset="false" style="height: 80%;max-height:600px;overflow-y:scroll" class="list-group ">
                                    </ul>

                                </div>

                            </div>
                        </div>
                    </div>
                    <hr/>
                </div>
                <div class="ui-block-c">
                    <div class="ui-bar ui-bar-b">
                        <h1>Game Network </h1>
                        <!--   <a href="#play-watch-section" data-mini="true" data-rel="popup" data-position-to="window" style="width:80%" class="ui-mini ui-btn ui-shadow ui-corner-all ui-btn-inline">Join / Watch Active Games</a>
                        -->
                    </div>
                    <div id="net-message"></div>
                    <div data-role="collapsibleset" data-theme="a" data-content-theme="a" data-inset="true">
                        <div data-role="collapsible" data-collapsed="false">
                            <h3>Messages</h3>
                            <label for="move-message">Message:</label>
                            <input type="text" xclass="form-control" id="move-message" name="move-message">
                            <button id="postMessageBtn" type="submit" class="ui-mini btn btn-default ui-btn ui-btn-inline">Post</button>
                            <a href="#" data-icon="refresh" id="server-link" value="connect-server" class="ui-mini btn btn-default ui-btn ui-btn-inline">
                                    Reconnect
                                </a>
                            <a href="#" id="ping-link" value="ping" class="ui-mini btn btn-default ui-btn ui-btn-inline">Ping Server</a>
                            <div class="ui-bar ui-bar-c">
                                <small>URI: <span id="server-uri" style="font-size:xx-small"></span></small>
                            </div>
                            <div class="ui-body">

                                <ul id="messages-list" class="list-group" data-inset="false" data-role="listview" style="height: 400px;overflow-y:scroll"></ul>
                            </div>

                        </div>
                        <div data-role="collapsible">
                            <h3><a id="active-games-link" href="#"> Active Games </a></h3>

                            <ul id="active-games-list" data-role="listview" data-theme="b" data-inset="false" style="height: 80%;max-height:600px;overflow-y:scroll" class="list-group ">
                            </ul>

                        </div>
                        <div data-role="collapsible">
                            <h3> <a id="active-players-link" href="#">Players</a></h3>

                            <ul id="active-players-list" data-role="listview" data-theme="c" data-inset="false" style="height: 80%;max-height:600px;overflow-y:scroll" class="list-group ">
                            </ul>
                        </div>
                        <div data-role="collapsible">
                            <h3><a id="my-games-link" href="#">My Games </a></h3>

                            <ul id="my-games-list" data-role="listview" data-theme="c" data-inset="false" style="height: 80%;max-height:600px;overflow-y:scroll" class="list-group ">
                            </ul>

                        </div>
                    </div>
                </div>
            </div>

            <div id="login-popup" data-role="popup" data-theme="a" class="ui-content" style="max-width:400px;">
                <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
                <div class="panel panel-info">
                    <div data-role="header" class="panel-heading ui-bar" data-theme="b">
                        Login
                    </div>

                    <div class="panel-body ui-body">
                        <div class="ns-message"></div>
                        <div class="">

                            <form class="form-horizontal" id="login-form" novalidate>
                                <div class="form-group">
                                    <label class="control-label col-sm-4" for="login-id">Login ID:</label>
                                    <div class="col-sm-6 input-group">

                                        <input type="text" class="form-control" id="login-id" placeholder="Enter login id" required size="30" minlength="6" maxlength="30">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4" for="login-pwd">Password:</label>
                                    <div class="col-sm-6 input-group">

                                        <input type="password" class="form-control" id="login-pwd" placeholder="Enter password" required size="30" minlength="6" maxlength="30">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-offset-4 col-sm-6">
                                        <button id="login-submit" type="submit" class="btn btn-default ui-btn ui-btn-inline ">Submit</button>

                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="ns-processing"></div>
                        <div class="ns-account-message"></div>
                        <p>To play with other users in the network, you need to have a valid user account. </p>
                        <div class="alert alert-warning ui-bar ui-bar-b">
                            <a href="../html/register.html" target="account" class="ui-mini ui-inline">Sign Up</a>
                        </div>
                        <hr>
                    </div>
                </div>
            </div>
            <div id="game-over" data-role="popup" data-theme="a" style="max-width:500px;" class="modal fade gameOver ui-content" role="dialog">
                <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>

                <div class="modal-header ui-bar" data-theme="a">
                    <h4 class="modal-title text-center center text-warning">GAME OVER</h4>
                </div>
                <div class="modal-body ui-body">
                    <p class="text-center text-info center"><strong><span id="game-players"></span></strong></p>
                    <p class="text-center text-success center">Winner is: <span id="game-winner"></span></p>
                    <p class="text-center text-success center"><span id="game-result"></span></p>
                    <p class="text-center text-warning center">Final Score: <span id="game-score"></span></p>
                </div>

            </div>


            <div data-role="collapsibleset" data-inset="true">
                <div data-role="collapsible" data-collapsed-icon="carat-d" data-expanded-icon="carat-u">
                    <h4> <a href="#" id="refreshAppInfo-submit" data-icon="refresh" value="Refresh" class="">Server Status</a></h4>

                    <div id="tab-server">
                        <h5>API URL: <span id="api-url"></span> </h5>
                        <div id="help-message"> </div>
                        <table id="app-info-table" class="table table-striped">
                            <tbody id="app-info-table-body">

                            </tbody>
                        </table>
                    </div>
                    <!--
                <ul data-role="listview" data-inset="false">
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>-->
                </div>
                <div data-role="collapsible">
                    <h4>Active Game State </h4>
                    <a href="#" id="game-state-link" value="Refresh">
                        Refresh
                     </a>
                    <div id="game-state-message"> </div>
                    <table id="game-state-table" class="table table-striped">
                        <!-- change to a list-->
                        <tbody id="game-state-table-body">

                        </tbody>
                    </table>
                    <!--    <ul data-role="listview" data-inset="false">
                        <li>Cats</li>
                        <li>Dogs</li>
                        <li>Lizards</li>
                        <li>Snakes</li>
                    </ul>-->
                </div>
                <div data-role="collapsible">
                    <h4>App Client State </h4>
                    <a href="#" id="app-state-link" value="Refresh">
                        Refresh
                    </a>
                    <div id="app-state-message"> </div>
                    <table id="app-state-table" class="table table-striped">
                        <tbody id="app-state-table-body">

                        </tbody>
                    </table>
                </div>
                <div data-role="collapsible">
                    <h4>User and Account State </h4>
                    <a href="#" id="user-state-link" value="Refresh">
                        Refresh
                    </a>
                    <div id="user-state-message"> </div>
                    <table id="user-state-table" class="table table-striped">
                        <tbody id="user-state-table-body">

                        </tbody>
                    </table>
                </div>
            </div>
            <!-- collapsible set -->
        </div>
        <div data-role="footer" data-position="fixed">
            <h5> Developed & Operated By <a target="nouris" href="http://www.nouriSolutions.com">Nouri&nbsp;Solutions,&nbsp;LLC</a>
            </h5>
            <a href="#popup-menu" data-icon="grid" data-mini="true" data-rel="popup" data-transition="slideup" class="ui-btn-left" data-iconpos="notext">
                Play / Watch
            </a>
        </div>
    </div>
    <script src="../lib/json/json3.min.js"></script>
    <!--  <script src="../lib/jquery/jquery.min.js"></script> -->


    <script src="../jsconfig/env.js"></script>
    <script src="../js/jquery.signalR-2.4.0.js"></script>
    <script src="../js/jquery.validate.js"></script>
    <script src="../js/additional-methods.js"></script>
    <script>
        var scriptToLoad = window.__env.baseURI + "signalR/hubs";
        console.log("loading: " + scriptToLoad);
        var signalRElement = document.createElement('script');
        signalRElement.setAttribute('src', scriptToLoad);
        document.body.appendChild(signalRElement)
        console.log("loading: " + scriptToLoad);
    </script>

    <script src="../js/moment.min.js"></script>
    <script src="../js/kharbga-ui.js"></script>
    <script src="../js/kharbga.js"></script>
    <script src="../js/ns-app-utils.js"></script>
    <script src="../js/ns-api-client.js"></script>
    <script src="../js/ns-app-user.js"></script>
    <script src="../js/ns-app-kharbga.js"></script>
    <script src="play.js"></script>
</body>